<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="images/logo.jpg" type="image/jpg">
    <script type="text/javascript" src="../../app.js"></script>
    <title>View Trips | Logitech Express</title>
</head>

<body>
    <div class="navbar">
        <a href="/home">Home</a>
            <script>
                    function back() {
                        window.location.href = '/home';
                     }
                </script>
        <a class="active" href="/viewTrips">View Trips</a>
        <a href="">View Booked Trips</a>
        <div class = "navbar-right">
        <a class="logout" href="/">Logout</a>
        </div>
    </div>
    <h1 class = "viewTrips">TRIPS AVAILABLE</h1>
    <hr/>
    <br>
    <div>
        <input type="search" placeholder="Search" id="searchBus" onkeyup="searchFunction()">            
    </div>
    <div class="fixedTable">
    <table class="view-trips">
        <thead>
            <th>Trip ID</th>
            <th>Bus Liner</th>
            <th>Origin</th>
            <th>Destination</th>
            <th>Seats Available</th>
            <th>Date of Departure</th>
            <th>Fare</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody class id = "busTable">
        <% trips.forEach(function(value) { %>
            <% var t = value.trip_id %>
            <tr>
                <td><a href="#"><%= t %></a></td>
                <td><a href="#"><%= value.bus_line %></a></td>
                <td><a href="#"><%= value.origin %></a></td>
                <td><a href="#"><%= value.destination %></a></td>
                <td><a href="#"><%= value.seats_available %>/50</a></td>
                <% var c = (value.date).split(/[- :]/) %>
                <td><a href="#"><%= c[1] %>/<%= c[2] %>/<%= c[0] %> <%= c[3] %>:<%= c[4] %></a></td>
                <td><a href="#">â‚±<%= value.fare %></a></td>
                <td class = "<%= t %>">
                    <form action="/viewDetails" method="POST">
                        <input type="text" name="id" value="<%= t %>" style="display: none;">
                        <button type="submit" class = "detailsButton">View Details</a>
                    </form>   
                </td>
            </tr>
        <% }) %>
        </tbody>
    </table>
</div>
    
<script>
        function searchFunction() {
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value;
            tbody = document.getElementById("myUL");
            td = tbody.getElementsByTagName("td");
            for (i = 0; i < li.length; i++) {
                a = li[i].getElementsByTagName("a")[0];
                txtValue = a.textContent || a.innerText;
                if (txtValue.indexOf(filter) > -1) {
                    td[i].style.display = "";
                } else {
                    td[i].style.display = "none";
                }
            }
        }
</script>
</body>
</html>